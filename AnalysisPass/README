Dependencies : clang/LLVM 3.9.1 and libkernelexpr

Compilation :

1) Edit Makefile.inc

2) Compile the LLVM pass:

$ make

Usage :
You can use the script run.sh to test the pass, e.g:
$ ./run.sh spirfile.bc

example :
$ ./run.sh tests/kernels/for-0-64.ll
