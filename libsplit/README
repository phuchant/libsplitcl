Dependencies :
- llvm-3.2 and clang version generating spir : https://github.com/KhronosGroup/SPIR
- libkernelexpr
- ClTransform tool
- KernelAnalysis pass

Compilation :
Edit the Makefile to set the variables correctly.

CLANGPATH must point to the clang binary.
OPTPATH must point to the opt binary.
CLTRANSFORMPATH must point to the cltransfrom binary.
KERNELANALYSIS_SO_PATH must point to the klanalysis.so file.
KERNELEXPR_INCLDUE_PATH must point to the include path of LibKernelExpr
KERNELEXPR_LIB_PATH must point the the lib path of LibKernelExpr

Usage :
LD_PRELOAD=<path-to-libhookocl.so> ./my-opencl-app

The split paramters can be specified in the environment variable SPLITPARAMS

SPLITPARAMS="<denominator> <nominator> <deviceid> <nominator> <deviceid> .."

The split dimension can be specified in the environment variable SPLITDIM
SPLITDIM=<split dimension>

example for the split: 1/4 on device 0, 1/2 on device 1 and 1/4 on device 0, using dim 2:
SPLITDIM=2 SPLITPARAMS="4 1 0 2 1 1 0" LD_PRELOAD=<path-to-libhookocl.so> ./my-opencl-app
